<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://opengraphprotocol.org/schema/"
      xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
	<title>Company Page - Target Facebook Prototype</title>
	<meta property="fb:admins" content="4810297,1901865"/>
	<meta property="og:title" content="HUGE Prototype"/>
	<meta property="og:type" content="company"/>
	<meta property="og:site_name" content="HUGE Prototype"/>
	<meta property="og:image" content="http://daniel-schwartz.com/projects/target_facebook_prototype/puppies.jpg"/>
	<meta property="og:url" content="http://daniel-schwartz.com/projects/target_facebook_prototype/company.html"/>
	<meta property="og:description" content="HUGE Prototype Description."/>
	<style>
		.hero-wrapper{
			width:500px;
			margin:20px auto 0;
		}
		.hero {
			position:absolute;
			width:500px;
		}
		.over-liked{
			background:rgba(0,0,0,0.7);
			position:absolute;
			bottom:0;
			width:500px;
			height:28px;
			display:none;
			line-height:28px;
			text-align:center;
			color:#FFF;
		}
	</style>
</head>

<body>
	<script>
		window.fbAsyncInit = function() {
		  	FB.init({appId: '175766212441304', status: true, cookie: true,
		           xfbml: true});

			//get the uid of the user currently logged in
			FB.getLoginStatus(function(response) {
				if(response.status == "connected"){
					user.uid = response.session.uid;
					$(".hero").append("<p>your email is: " + usermail[user.uid] + "</p>");
				}
				else{

				}
			});
		};
	</script>
	<div class="hero-wrapper">
		<div class="hero">
			<img src="puppies.jpg">
			<fb:like href="http://daniel-schwartz.com/projects/target_facebook_prototype/company.html" show_faces="false" width="500" font="arial"></fb:like>
			<div class="over-liked">
				<span>Sorry Too Many Likes</span>
			</div>
			<fb:login-button></fb:login-button>
		</div>		
	</div>
	<div id="fb-root"></div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
	<script type="text/javascript">
	<!--
	var count = 0;
	var usermail = {
		'4810297': 'dschwartz@hugecinc.com'
	};
	var user = {};

	FB.Event.subscribe('xfbml.render', function(href, widget) {
	 	//use count because this gets fired twice (no idea why, possibly because it renderes two iframes, one for logged in users and ont for logged out users)
		count++;
		if(count > 1){
			FB.api('http://daniel-schwartz.com/projects/target_facebook_prototype/company.html', function(response) {
			  if(response.likes > 6){
				$(".over-liked").css('display', 'block');
			}
			
			});
		}
	 });
	
	console.log(user);
	//-->
	</script>
</body>
</html>
